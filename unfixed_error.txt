SERVER
======

Listening on port 3000!
REST: Received /init { procedure_id: 'p_bsn',
  mid_hex: '3bb15e42430bba44503fe2aba5568d4191401f01',
  mid_b64: 'O7FeQkMLukRQP+KrpVaNQZFAHwE=',
  credentials: '[]' }
INFO: Transaction #f79aee51-d44a-4d2e-9a80-d88474e549a3: initiating..
INFO: Transaction #f79aee51-d44a-4d2e-9a80-d88474e549a3: No verification required.
INFO: Transaction #f79aee51-d44a-4d2e-9a80-d88474e549a3: Awaiting attestation request(s).
REST: Received /data { mid: 'O7FeQkMLukRQP+KrpVaNQZFAHwE=',
  transaction_id: 'f79aee51-d44a-4d2e-9a80-d88474e549a3' }
Resolving, given credentials:
[]
REST: Received /init { procedure_id: 'p_kvknr',
  mid_hex: '3bb15e42430bba44503fe2aba5568d4191401f01',
  mid_b64: 'O7FeQkMLukRQP+KrpVaNQZFAHwE=',
  credentials: '[{"attribute_name":"bsn","attribute_hash":"PFS9XqgVUjrZhfm5rLoePDqQnTk=","attribute_value":"bsn1"}]' }
INFO: Transaction #d1bee21a-9607-4bec-8983-9734ae808453: initiating..
INFO: Transaction #d1bee21a-9607-4bec-8983-9734ae808453: Awaiting verification of credential 'PFS9XqgVUjrZhfm5rLoePDqQnTk='.
Looking for O7FeQkMLukRQP+KrpVaNQZFAHwE= (hex: 3bb15e42430bba44503fe2aba5568d4191401f01)
Peer O7FeQkMLukRQP+KrpVaNQZFAHwE= found!
Requesting verification from O7FeQkMLukRQP+KrpVaNQZFAHwE=.
Api Error { path: '/attestation?type=verify&mid=O7FeQkMLukRQP%2BKrpVaNQZFAHwE%3D&attribute_hash=PFS9XqgVUjrZhfm5rLoePDqQnTk%3D&attribute_values=YnNuMQ%3D%3D&id_format=id_metadata&id_metadata=bnVsbA%3D%3D',
  status: 400,
  message: undefined }
(node:3028) UnhandledPromiseRejectionWarning: Error: Request failed with status code 400
    at createError (C:\Users\Tim\Dev\KvKAttestationServerTS\node_modules\axios\lib\core\createError.js:16:15)
    at settle (C:\Users\Tim\Dev\KvKAttestationServerTS\node_modules\axios\lib\core\settle.js:17:12)
    at IncomingMessage.handleStreamEnd (C:\Users\Tim\Dev\KvKAttestationServerTS\node_modules\axios\lib\adapters\http.js:237:11)
    at emitNone (events.js:111:20)
    at IncomingMessage.emit (events.js:208:7)
    at endReadableNT (_stream_readable.js:1064:12)
    at _combinedTickCallback (internal/process/next_tick.js:138:11)
    at process._tickDomainCallback (internal/process/next_tick.js:218:9)
(node:3028) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 2)
(node:3028) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.


CLIENT
======

First fetching BSN
Initiating attestation procedure 'p_bsn'
Fetching required credentials: none.
Initiating transaction..
Awaiting verification of credentials.
Polling server for attributes.
Data received from server:
[ { attribute_name: 'bsn', attribute_value: 'bsn1' } ]
Requesting attestations of attributes: bsn.
Polling for attestation results..
Attestations received:
{ bsn:
   { attribute_name: 'bsn',
     attribute_hash: 'PFS9XqgVUjrZhfm5rLoePDqQnTk=',
     metadata: {},
     signer_mid_64: 'tAX/kPZ1E3KM/miu/4d2c1Ni9yw=' } }
Procedure complete!
Now fetching KVKnr
Initiating attestation procedure 'p_kvknr'
Fetching required credentials: bsn.
Client's attestations:
[ { attribute_name: 'bsn',
    attribute_hash: 'PFS9XqgVUjrZhfm5rLoePDqQnTk=',
    metadata: {},
    signer_mid_64: 'tAX/kPZ1E3KM/miu/4d2c1Ni9yw=' },
  { attribute_name: 'kvknr',
    attribute_hash: 'lw4yb85q8yBPIuBynrLjhH7BDWo=',
    metadata: {},
    signer_mid_64: 'tAX/kPZ1E3KM/miu/4d2c1Ni9yw=' } ]
Initiating transaction..
Awaiting verification of credentials.